[
    {
        "Convey":"extract the server name from %server% for testing",
        "Zome": "clutter",
        "Raw": true,
        "Input": "server = \"%server%\".split(\".\")[0];server",
        "Regexp": "fish"
    },
    {
        "Convey":"extract the server ID from %server% for testing",
        "Zome": "clutter",
        "Raw": true,
        "Input": "serverID=parseInt(\"%server%\".split(\".\")[1])",
        "Regexp": "[0-9]+"
    },
    {
        "Convey":"calculate the n-1th clone agent name for testing",
        "Zome": "clutter",
        "Raw": true,
        "Input": "numClones=!CLONES!;numServers=!SERVERS!;serverID=%result1%-1;if (serverID<0){serverID=numServers-1};clone=%clone%; clone--; if (clone<0){clone=numClones-1}; agent = \"clone.\"+clone+\"@%result0%.\"+serverID+\"-new\";agent",
        "Regexp": "clone.[0-9]+@%result0%.[0-9]+-new"
    },
    {
        "Convey":"setup handle: clone",
        "Zome": "clutter",
        "FnName": "newHandle",
        "Input": "%agentstr%-new",
        "Output": "%h2%",
        "Exposure":"public",
        "Err": "",
        "Regexp": ""
    },
    {
        "Convey":"post a bunch",
        "Zome": "clutter",
        "Time":1000,
        "Wait": 200,
        "Repeat": !REPS!,
        "FnName": "post",
        "Input": {"message": "hello world from %agentstr%-new repetition: %reps%",
                  "stamp":1234},
        "Output": "\"%h1%\"",
        "Exposure":"public"
    },
    {
        "Convey":"get the n-1th clone agent key",
        "Zome": "clutter",
        "Time":!PAUSE!100,
        "FnName": "getAgent",
        "Input": "%result2%",
        "Regexp": "Qm[a-zA-Z0-9]*"
    },
    {
        "Time":!PAUSE!800,
        "Convey":"follow it",
        "Zome": "clutter",
        "FnName": "follow",
        "Input": "%r1%",
        "Output": "%h%"
    },
    {
        "Time":!PAUSE!999,
        "Convey":"retrieve the posts",
        "Zome":   "clutter",
        "FnName": "getPostsBy",
        "Input":  "[\"%r2%\"]",
        "Exposure":"public",
        "Regexp": ".*hello world from %result2% repetition: 2.*"
    }
]
